//- searchbar 

html
	head
		include navBar.pug
		title Searchbar #{title}
		script(src="https://code.jquery.com/jquery-3.2.1.min.js"
				integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
				crossorigin="anonymous")

	body.searchBarBody 
		h1 Search bar
		div(class='box')
			div(class='containersearchBar')
				form 
				p
					input(id="autocomplete", list="suggestion", autocomplete="off")
					datalist(id="suggestion")
			

					
		script.
			$(document).ready(function() {
				let date = Date.now()
				$("#autocomplete").keyup(function() {
					if (Date.now() - date >= 300){
					date = Date.now()	
					let suggest = $("#autocomplete").val().toLowerCase()
					console.log("hi", suggest)
					$.ajax({
					url:"http://localhost:3000/jsonSearch",
					type:"GET",
					data:{name: suggest},
					crossdomain: true,
					datatype: "json",
					success: function(data, textStatus, jqXHR){
						console.log("reached3")
						$("#suggestion").empty()
						for(var i = 0; i<data.length; i++) {
							$("#suggestion").append("<option value='" + data[i] + "'>")
						}
					},
					error:function(result){
						console.log("reached4")
						console.log("error" + result)
					},
				})
				}
			})
			})

style(type='text/css').
	h1 {
	text-align: center;
	margin-top: 100px;
	font-family: Calibri;
	}
	.searchBarBody {
		background: #343d46;
	}

	.box {
	margin: 0 auto;
	width: 300px;
	height: 50px;
	}

	#autocomplete {
		width: 300px;
		height: 50px;
		background: #2b303b;
		border: none;
		font-size: 35px;
		float: left;
		color: #63717f;
		padding-left: 45px;
		-webkit-border-radius: 5px;
		-moz-border-radius: 5px;
		border-radius: 5px;
	}

	.containersearchBar{
		width: 300px;
		vertical-align: middle;
		white-space: nowrap;
		position: relative;
		}

	#autocomplete:: -webkit-input-placeholder {
		color: #65737e;
		}

	#autocomplete:: -ms-input-placeholder {  
		color: #65737e;  
		}
